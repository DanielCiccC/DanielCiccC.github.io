<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1,user-scalable=no">
<meta name="description" content="module3p4 - microjam page">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js/styles/vs.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/goessner/mdmath/themes/publication/style.css">

<title>module3p4</title>
</head>
<body id="top">
<header>






</header>
<main>
<h1 dir="auto" id="module-3---nested-queries-and-views">Module 3 - nested queries and Views</h1>
<h3 dir="auto" id="nested-queries">Nested queries</h3>
<ul dir="auto">
<li dir="auto">A nested query (often termed subquery) is a query that appears within another query</li>
</ul>
<h3 dir="auto" id="non-correlated-queries">Non-Correlated queries</h3>
<ul dir="auto">
<li dir="auto">Results are returned from an inner query to an outer clause</li>
<li dir="auto">Subqueries are evaluated from the “inside out”</li>
</ul>
<p dir="auto"><img src="assets\IMG72.PNG" alt="alt text" data-src="assets/IMG72.PNG"></p>
<h3 dir="auto" id="correlated-queries">Correlated Queries</h3>
<ul dir="auto">
<li dir="auto">Conditions in subquery WHERE clause have references to some attributes of
a relation in the outer query</li>
<li dir="auto">The outer SQL statement provides the values for the inner subquery to use in
its evaluation</li>
<li dir="auto">The <strong>subquery is evaluated once for each (combination of) tuple in the outer query</strong></li>
</ul>
<p dir="auto"><img src="assets\IMG73.PNG" alt="alt text" data-src="assets/IMG73.PNG"></p>
<h2 dir="auto" id="subquery-operators">Subquery operators</h2>
<table dir="auto">
<thead dir="auto">
<tr dir="auto">
<th><strong>Operator</strong></th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody dir="auto">
<tr dir="auto">
<td><code>IN</code></td>
<td>Checked for set membership</td>
<td>List the department names for departments which have a manager named “Jennifer”. <img src="assets\IMG74.PNG" alt="alt text" data-src="assets/IMG74.PNG"></td>
</tr>
<tr dir="auto">
<td><code>ANY/ALL</code></td>
<td>Compares with the set returned. Operations use operators <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mo separator="true">,</mo><mo>&gt;</mo><mo separator="true">,</mo><mo>≥</mo><mo separator="true">,</mo><mo>≤</mo><mo separator="true">,</mo><mo>&lt;</mo><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">&lt;, &gt;, \ge, \le, &lt;&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.1944em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span></span><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.1944em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;&gt;</span></span></span></span></td>
<td><img src="assets\IMG75.PNG" alt="alt text" data-src="assets/IMG75.PNG"></td>
</tr>
<tr dir="auto">
<td>Single value operators</td>
<td>Expression is compared with the value(s) returned</td>
<td>Find the names and salaries of employees getting the minimum salary. <img src="assets\IMG76.PNG" alt="alt text" data-src="assets/IMG76.PNG"></td>
</tr>
<tr dir="auto">
<td><code>EXISTS</code></td>
<td>Tests the existence of data that meet the criteria of the subquery. EXISTS evaluates to true if the result of the correlated subquery is a non-empty set.</td>
<td>Find movies that were the only movie produced that year. <img src="assets\IMG77.PNG" alt="alt text" data-src="assets/IMG77.PNG"></td>
</tr>
</tbody>
</table>
<h3 dir="auto" id="division-and-problems-with-the-division-problem">Division and problems with the division problem</h3>
<p dir="auto"><img src="assets\IMG78.PNG" alt="alt text" data-src="assets/IMG78.PNG"></p>
<h3 dir="auto" id="counting">Counting</h3>
<p dir="auto"><strong>“Find the movie star(s) who acted in at least all the movies produced in the year 1934.”</strong></p>
<ul dir="auto">
<li dir="auto">Count the number of movies in 1934</li>
<li dir="auto">Count the number of movies in 1934 that MoviesStart X acted in</li>
</ul>
<p dir="auto"><img src="assets\IMG79.PNG" alt="alt text" data-src="assets/IMG79.PNG"></p>
<p dir="auto"><strong>STEP 1:</strong></p>
<p dir="auto"><img src="assets\IMG82.PNG" alt="alt text" data-src="assets/IMG82.PNG"></p>
<p dir="auto"><strong>STEP 2:</strong></p>
<p dir="auto"><img src="assets\IMG83.PNG" alt="alt text" data-src="assets/IMG83.PNG"></p>
<h3 dir="auto" id="double-negation">Double negation</h3>
<p dir="auto"><strong>“Find the movie star(s) who acted in at least all the movies produced in the year 1934.”</strong></p>
<ol dir="auto">
<li dir="auto">Find the negation of the statement - in this case, the blue region of the diagram. We want this section to be EMPTY and apply this negation through the use of a <code>NOT EXISTS</code> operation</li>
<li dir="auto">Use a correlated inner query to compute the result
<ul dir="auto">
<li dir="auto">For instances where the blue is NOT NULL (empty) we will <em>not</em> return a result</li>
<li dir="auto">For instances where the blue is NULL (and this is where both the green and the red is true) we <em>will</em> return a result</li>
</ul>
</li>
</ol>
<p dir="auto"><strong>STEP 1:</strong></p>
<p dir="auto"><img src="assets\IMG84.PNG" alt="alt text" data-src="assets/IMG84.PNG"></p>
<p dir="auto"><strong>STEP 2:</strong></p>
<p dir="auto"><img src="assets\IMG85.PNG" alt="alt text" data-src="assets/IMG85.PNG"></p>
<h2 dir="auto" id="views">Views</h2>
<ul dir="auto">
<li dir="auto"><strong>Virtual tables</strong> - that do not physically exist on disk.</li>
<li dir="auto"><strong>Materialized</strong> - by physically creating the view table. These must be updated when the base tables are updated</li>
</ul>
<p dir="auto"><img src="assets\IMG80.PNG" alt="alt text" data-src="assets/IMG80.PNG"></p>
<h2 dir="auto" id="dropping-views">Dropping views</h2>
<p dir="auto">Dropping a view does not affect any tuples from the underlying relation.</p>
<p dir="auto"><img src="assets\IMG81.PNG" alt="alt text" data-src="assets/IMG81.PNG"></p>

</main>
</body>
</html>