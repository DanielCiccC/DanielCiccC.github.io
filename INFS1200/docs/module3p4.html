<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1,user-scalable=no">
<meta name="description" content="undefined - microjam page">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js/styles/vs.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/goessner/mdmath/themes/publication/style.css">

<title>undefined</title>
</head>
<body id="top">
<header>






</header>
<main>
<h1 id="module-3---nested-queries-and-views">Module 3 - nested queries and Views</h1>
<h3 id="nested-queries">Nested queries</h3>
<ul>
<li>A nested query (often termed subquery) is a query that appears within another query</li>
</ul>
<h3 id="non-correlated-queries">Non-Correlated queries</h3>
<ul>
<li>Results are returned from an inner query to an outer clause</li>
<li>Subqueries are evaluated from the “inside out”</li>
</ul>
<p><img src="image-6.png" alt="alt text"></p>
<h3 id="correlated-queries">Correlated Queries</h3>
<ul>
<li>Conditions in subquery WHERE clause have references to some attributes of
a relation in the outer query</li>
<li>The outer SQL statement provides the values for the inner subquery to use in
its evaluation</li>
<li>The <strong>subquery is evaluated once for each (combination of) tuple in the outer query</strong></li>
</ul>
<p><img src="image-7.png" alt="alt text"></p>
<h2 id="subquery-operators">Subquery operators</h2>
<table>
<thead>
<tr>
<th><strong>Operator</strong></th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>IN</code></td>
<td>Checked for set membership</td>
<td>List the department names for departments which have a manager named “Jennifer”. <img src="image-9.png" alt="alt text"></td>
</tr>
<tr>
<td><code>ANY/ALL</code></td>
<td>Compares with the set returned. Operations use operators <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mo separator="true">,</mo><mo>&gt;</mo><mo separator="true">,</mo><mo>≥</mo><mo separator="true">,</mo><mo>≤</mo><mo separator="true">,</mo><mo>&lt;</mo><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">&lt;, &gt;, \ge, \le, &lt;&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:0.8304100000000001em;vertical-align:-0.19444em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span></span><span class="base"><span class="strut" style="height:0.8304100000000001em;vertical-align:-0.19444em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span></span><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;&gt;</span></span></span></span></eq></td>
<td><img src="image-10.png" alt="alt text"></td>
</tr>
<tr>
<td>Single value operators</td>
<td>Expression is compared with the value(s) returned</td>
<td>Find the names and salaries of employees getting the minimum salary. <img src="image-11.png" alt="alt text"></td>
</tr>
<tr>
<td><code>EXISTS</code></td>
<td>Tests the existence of data that meet the criteria of the subquery. EXISTS evaluates to true if the result of the correlated subquery is a non-empty set.</td>
<td>Find movies that were the only movie produced that year. <img src="image-12.png" alt="alt text"></td>
</tr>
</tbody>
</table>
<h3 id="division-and-problems-with-the-division-problem">Division and problems with the division problem</h3>
<p><img src="image-13.png" alt="alt text"></p>
<h3 id="counting">Counting</h3>
<p><strong>“Find the movie star(s) who acted in at least all the movies produced in the year 1934.”</strong></p>
<ul>
<li>Count the number of movies in 1934</li>
<li>Count the number of movies in 1934 that MoviesStart X acted in</li>
</ul>
<p><img src="image-14.png" alt="alt text"></p>
<p><strong>STEP 1:</strong></p>
<img src="image-15.png" alt="drawing" width="600"/>
<p><strong>STEP 2:</strong></p>
<img src="image-16.png" alt="drawing" width="600"/>
<h3 id="double-negation">Double negation</h3>
<p><strong>“Find the movie star(s) who acted in at least all the movies produced in the year 1934.”</strong></p>
<ol>
<li>Find the negation of the statement - in this case, the blue region of the diagram. We want this section to be EMPTY and apply this negation through the use of a <code>NOT EXISTS</code> operation</li>
<li>Use a correlated inner query to compute the result
<ul>
<li>For instances where the blue is NOT NULL (empty) we will <em>not</em> return a result</li>
<li>For instances where the blue is NULL (and this is where both the green and the red is true) we <em>will</em> return a result</li>
</ul>
</li>
</ol>
<p><strong>STEP 1:</strong></p>
<img src="image-19.png" alt="drawing" width="600"/>
<p><strong>STEP 2:</strong></p>
<img src="image-18.png" alt="drawing" width="600"/>
<h2 id="views">Views</h2>
<ul>
<li><strong>Virtual tables</strong> - that do not physically exist on disk.</li>
<li><strong>Materialized</strong> - by physically creating the view table. These must be updated when the base tables are updated</li>
</ul>
<p><img src="image-20.png" alt="alt text"></p>
<h2 id="dropping-views">Dropping views</h2>
<p>Dropping a view does not affect any tuples from the underlying relation.</p>
<p><img src="image-21.png" alt="alt text"></p>

</main>
</body>
</html>